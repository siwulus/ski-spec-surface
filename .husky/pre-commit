#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# 1. Lint and format staged files (fastest, most common failures)
echo "\nğŸ“ Linting and formatting staged files..."
npx lint-staged || exit 1

# 2. Type check entire codebase (fast, catches type errors)
echo "\nğŸ” Type checking..."
pnpm type-check || exit 1

# 3. Run unit tests (slower, but critical)
echo "\nğŸ§ª Running unit tests..."
pnpm test:unit || exit 1

echo "\nâœ… All pre-commit checks passed!"
echo "â„¹ï¸  Tip: Use 'git commit --no-verify' to skip checks in emergencies"
